{% extends "base.html" %}
{% block content %}
<form method="post">
  <div class="mb-3">
    <label class="form-label">Utilities (JSON or Python dict)</label>
    <textarea class="form-control" id="ta-utils" name="utilities"
      rows="4"
>{"0":{"0":11,"1":22},"1":{"0":11,"1":22}}</textarea>
    <button type="button" class="btn btn-sm btn-outline-secondary mt-2"
            id="btn-random">üé≤ Random example</button>
  </div>

  <div class="mb-3">
    <label class="form-label">k (number of rounds, even for Algo 2)</label>
    <input type="number" name="k" value="2" class="form-control">
  </div>

  <div class="mb-3">
    <label class="form-label">Choose algorithm</label>
    <select class="form-select" name="algo">
      <option value="1" selected>Algorithm 1 (k = 2)</option>
      <option value="2">Algorithm 2 (k even)</option>
    </select>
  </div>

  <button class="btn btn-primary">Run</button>
</form>
<a class="btn btn-outline-secondary mt-3" href="{{ url_for('main.about') }}">
    ‚ÑπÔ∏è About
</a>

<script>
(function () {
  const TA = document.getElementById("ta-utils");

  function randomInstance() {
    const items = Math.floor(Math.random()*3)+3;   // 3-5 items
    const utils = {"0":{}, "1":{}};
    for (let i=0;i<items;++i) {
      utils["0"][i] = Math.floor(Math.random()*11)-5;
      utils["1"][i] = Math.floor(Math.random()*11)-5;
    }
    TA.value = JSON.stringify(utils, null, 2);
  }
  document.getElementById("btn-random")
          .addEventListener("click", randomInstance);
})();
</script>
{% endblock %}
