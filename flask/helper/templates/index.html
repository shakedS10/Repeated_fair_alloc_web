{% extends "base.html" %}
{% block content %}
<form method="post">
  <!-- ‚ù∂ utilities textarea ---------------------------------------------->
  <div class="mb-3">
    <label class="form-label">Utilities (JSON or Python dict)</label>
    <textarea class="form-control" id="ta-utils" name="utilities"
              rows="4"
>{"0":{"0":11,"1":22},"1":{"0":11,"1":22}}</textarea>
  </div>

  <!-- ‚ù∑ optional item-count for the random demo -------------------------->
  <div class="mb-3">
    <label class="form-label">
      Items for random generator
      <small class="text-muted">(leave blank ‚á¢ random 3-5)</small>
    </label>
    <input type="number" min="1" id="inp-items"
           class="form-control" placeholder="e.g. 8">
  </div>

  <button type="button" class="btn btn-sm btn-outline-secondary mb-3"
          id="btn-random">üé≤ Random example</button>

  <!-- ‚ù∏ algorithm + k ---------------------------------------------------->
  <div class="mb-3">
    <label class="form-label">k (number of rounds ‚Äì even for Algo 2)</label>
    <input type="number" name="k" value="2" class="form-control">
  </div>

  <div class="mb-3">
    <label class="form-label">Choose algorithm</label>
    <select class="form-select" name="algo">
      <option value="1" selected>Algorithm 1 (k = 2)</option>
      <option value="2">Algorithm 2 (k even)</option>
    </select>
  </div>

  <button class="btn btn-primary">Run</button>
</form>

<a class="btn btn-outline-secondary mt-3" href="{{ url_for('main.about') }}">
  ‚ÑπÔ∏è About
</a>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ random-instance helper JS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ-->
<script>
(function () {
  const TA   = document.getElementById("ta-utils");
  const N_IN = document.getElementById("inp-items");   // new

  function randomInstance() {
    /* itemsRequested = value of the input, or NaN if empty */
    let itemsRequested = parseInt(N_IN.value, 10);
    /* fall back to old behaviour (random 3‚Äì5) when field blank/invalid */
    const items = isNaN(itemsRequested)
        ? (Math.floor(Math.random() * 3) + 3)          // 3‚Ä•5
        : Math.max(1, itemsRequested);                 // ‚â•1

    const utils = {"0": {}, "1": {}};
    for (let i = 0; i < items; ++i) {
      utils["0"][i] = Math.floor(Math.random() * 11) - 5;  // ‚àí5‚Ä•5
      utils["1"][i] = Math.floor(Math.random() * 11) - 5;
    }
    TA.value = JSON.stringify(utils, null, 2);
  }

  document.getElementById("btn-random")
          .addEventListener("click", randomInstance);
})();
</script>
{% endblock %}
